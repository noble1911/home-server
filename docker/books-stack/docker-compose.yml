services:
  calibre-web:
    image: lscr.io/linuxserver/calibre-web:0.6.25
    container_name: calibre-web
    environment:
      - PUID=501
      - PGID=20
      - TZ=Europe/London
      - DOCKER_MODS=linuxserver/mods:universal-calibre
    volumes:
      - calibre-web-config:/config
      - ${DRIVE_PATH:-/Volumes/HomeServer}/Books/eBooks:/books
    ports:
      - "8083:8083"
    networks:
      - homeserver
    restart: unless-stopped

  audiobookshelf:
    image: ghcr.io/advplyr/audiobookshelf:v2.32.1
    container_name: audiobookshelf
    environment:
      - TZ=Europe/London
    volumes:
      - audiobookshelf-config:/config
      - audiobookshelf-metadata:/metadata
      - ${DRIVE_PATH:-/Volumes/HomeServer}/Books/Audiobooks:/audiobooks
      - ${DRIVE_PATH:-/Volumes/HomeServer}/Books/eBooks:/books
    ports:
      - "13378:80"
    networks:
      - homeserver
    restart: unless-stopped

  readarr:
    image: lscr.io/linuxserver/readarr:0.4.18-develop
    container_name: readarr
    environment:
      - PUID=501
      - PGID=20
      - TZ=Europe/London
    volumes:
      - readarr-config:/config
      - ${DRIVE_PATH:-/Volumes/HomeServer}/Books:/books
      - ${DRIVE_PATH:-/Volumes/HomeServer}/Downloads:/downloads
    ports:
      - "8787:8787"
    networks:
      - homeserver
    restart: unless-stopped

networks:
  homeserver:
    external: true

volumes:
  calibre-web-config:
  audiobookshelf-config:
  audiobookshelf-metadata:
  readarr-config:
